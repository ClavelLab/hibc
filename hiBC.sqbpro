<?xml version="1.0" encoding="UTF-8"?><sqlb_project><db path="/Users/lukascbossert/gitlab.rwth/CRC1382-Q02/HiBC_database/hiBC.db" readonly="0" foreign_keys="0" case_sensitive_like="0" temp_store="0" wal_autocheckpoint="0" synchronous="1"/><attached/><window><main_tabs open="structure browser pragmas query" current="3"/></window><tab_structure><column_width id="0" width="300"/><column_width id="1" width="0"/><column_width id="2" width="100"/><column_width id="3" width="4361"/><column_width id="4" width="0"/><expanded_item id="0" parent="1"/><expanded_item id="1" parent="1"/><expanded_item id="2" parent="1"/><expanded_item id="3" parent="1"/></tab_structure><tab_browse><current_table name="4,7:mainTAX_PHY"/><default_encoding codec=""/><browse_table_settings><table schema="main" name="ATMOSPHERE" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="24"/><column index="2" value="128"/><column index="3" value="63"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="CONDITION" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="24"/><column index="2" value="128"/><column index="3" value="63"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="COUNTRY" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="63"/><column index="2" value="121"/><column index="3" value="24"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="CRYO" show_row_id="1" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort><column index="5" mode="0"/></sort><column_widths><column index="1" value="214"/><column index="2" value="74"/><column index="3" value="125"/><column index="4" value="86"/><column index="5" value="101"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="DSMZ" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="63"/><column index="2" value="24"/><column index="3" value="152"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="GENOME" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="67"/><column index="2" value="40"/><column index="3" value="102"/><column index="4" value="110"/><column index="5" value="74"/><column index="6" value="213"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="ISOLATE" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort><column index="1" mode="0"/></sort><column_widths><column index="1" value="47"/><column index="2" value="188"/><column index="3" value="110"/><column index="4" value="86"/><column index="5" value="102"/><column index="6" value="43"/><column index="7" value="71"/><column index="8" value="94"/><column index="9" value="63"/><column index="10" value="86"/><column index="11" value="63"/><column index="12" value="94"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="ISOLATION" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="27"/><column index="2" value="74"/><column index="3" value="102"/><column index="4" value="94"/><column index="5" value="79"/><column index="6" value="71"/><column index="7" value="94"/><column index="8" value="82"/><column index="9" value="24"/><column index="10" value="300"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="MALDI" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="24"/><column index="2" value="86"/><column index="3" value="86"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="TAXONOMY" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="110"/><column index="2" value="133"/><column index="3" value="182"/><column index="4" value="105"/><column index="5" value="468"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="TAX_FAM" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="27"/><column index="2" value="160"/><column index="3" value="89"/><column index="4" value="86"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="TAX_GEN" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="27"/><column index="2" value="191"/><column index="3" value="82"/><column index="4" value="300"/><column index="5" value="87"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="TAX_PHY" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="24"/><column index="2" value="121"/><column index="3" value="74"/><column index="4" value="63"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="TAX_SPE" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="35"/><column index="2" value="136"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="TRUE_FALSE" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="24"/><column index="2" value="86"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="rRNA" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="63"/><column index="2" value="71"/><column index="3" value="55"/><column index="4" value="35"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table></browse_table_settings></tab_browse><tab_sql><sql name="SQL 1">SELECT ISOLATE.CLAVEL_LAB_ID,
TAX_SPE.Species as &quot;MALDI Species&quot;,
TAX_GEN.Genus as &quot;MALDI Genus&quot;,
TG.Genus as &quot;TAXONOMY Genus&quot;
from ISOLATE
join Maldi on MALDI.PK = ISOLATE.FK_MALDI
join TAXONOMY on TAXONOMY.PK = ISOLATE.FK_TAXONOMY
join TAX_SPE on TAX_SPE.pk = MALDI.FK_TAX_SPE
join TAX_GEN on TAX_GEN.pk	= MALDI.FK_TAX_GEN
join TAX_GEN TG on TG.pk = TAXONOMY.FK_TAX_GEN</sql><sql name="SQL 5">SELECT PK, COUNT(*) c FROM ISOLATE GROUP BY PK HAVING c &gt; 1</sql><sql name="SQL 4">/* COMMENT */
SELECT 
 i.Clavel_Lab_ID,
 /* check if there is a family defined
 it can be of either table */
  CASE WHEN  tf.family IS NOT NULL
  /* the manually selected family is taken into account */
       THEN tf.family
  /* the automatically detected family based on the genus is displayed */
       ELSE  tf2.Family
       END AS &quot;Tax Family&quot;,
 ts.Species as &quot;Tax Species&quot;,
 tg.genus as &quot;Tax Genus&quot;,
 tp.Phylum as &quot;Tax Phylum&quot;,
 g.Completeness as &quot;Completeness&quot;,
 dsmz.State as &quot;DSMZ&quot;,
 iso.DATE as &quot;isolation date&quot;
from ISOLATE i
 left join TAXONOMY t on t.pk = i.FK_TAXONOMY
 left join TAX_FAM tf on tf.pk = t.FK_TAX_FAM
 left join TAX_SPE ts on ts.pk = t.FK_TAX_SPE
 left join TAX_GEN tg on tg.pk = t.FK_TAX_GEN
 left join TAX_PHY tp on tp.pk = tf.FK_TAX_PHY
 left join TAX_FAM tf2 on tf2.pk = tg.FK_TAX_FAM
 
  left join GENOME g on g.pk = i.FK_GENOME
  left join True_False true on true.pk = g.FK_GENOME_PRESENT
  left join DSMZ on DSMZ.PK = i.FK_DSMZ
  left join ISOLATION iso on iso.pk = i.FK_ISOLATION

  /*now only get records where a genome is present for XY reason */
WHERE g.FK_GENOME_PRESENT == '1' 
 
</sql><sql name="SQL 5">/* COMMENT */
SELECT 
 i.Clavel_Lab_ID,
 i.DSM as &quot;DSM ID&quot;,
  CASE WHEN  tf.family IS NOT NULL
  /* the manually selected family is taken into account */
       THEN tf.family
  /* the automatically detected family based on the genus is displayed */
       ELSE  tf2.Family
       END AS &quot;Tax Family&quot;,
	  
	 
 ts.Species as &quot;Tax Species&quot;, /* Tax species for any reason  */
 tg.genus as &quot;Tax Genus&quot;,
 tp.Phylum as &quot;Tax Phylum&quot;,
 g.Completeness as &quot;Completeness&quot;
from ISOLATE i
 left join TAXONOMY t on t.pk = i.FK_TAXONOMY
 left join TAX_FAM tf on tf.pk = t.FK_TAX_FAM
 left join TAX_SPE ts on ts.pk = t.FK_TAX_SPE
 left join TAX_GEN tg on tg.pk = t.FK_TAX_GEN
 left join TAX_PHY tp on tp.pk = tf.FK_TAX_PHY
  left join TAX_FAM tf2 on tf2.pk = tg.FK_TAX_FAM

  left join GENOME g on g.pk = i.FK_GENOME
  left join True_False true on true.pk = g.FK_GENOME_PRESENT

WHERE 
 /* i.Clavel_Lab_ID LIKE &quot;%H16%&quot; */
 tg.Genus LIKE &quot;%Blautia%&quot;
 
 </sql><current_tab id="3"/></tab_sql></sqlb_project>
